@import "tailwindcss";

@theme {
  --color-background: 210 20% 98%; /* #F9FAFB - Cool Gray 50 */
  --color-surface: 0 0% 100%;
  --color-text-primary: 240 6% 10%; /* Zinc-900 */
  --color-text-secondary: 240 4% 46%; /* Zinc-500 */
  --color-text-tertiary: 240 5% 65%; /* Zinc-400 - Metadata */
  --color-border: 0 0% 0% 0.04; /* Single thin border: 1px solid rgba(0, 0, 0, 0.04) */

  /* Surface Elevation System - prevents nested white cards */
  --surface-0: transparent;                    /* Page background */
  --surface-1: rgba(255, 255, 255, 0.7);      /* Primary cards */
  --surface-2: rgba(250, 250, 252, 0.9);      /* Nested content */
  --surface-3: rgba(244, 244, 245, 1);        /* Inset/recessed elements */
  --surface-inset: rgba(0, 0, 0, 0.02);       /* Inset backgrounds */

  /* Modern Premium SaaS Theme Colors (Emerald) */
  --color-brand-primary: 159 96% 30%;      /* #059669 - Emerald-600 */
  --color-brand-primary-hover: 159 96% 25%; /* Emerald-700 */
  --color-brand-light: 159 96% 96%;        /* Emerald-50 */
  --color-brand-lighter: 159 96% 98%;      /* Emerald-25 */
  --color-brand-secondary: 160 84% 39%;   /* Emerald-500 */

  /* shadcn/ui semantic variables */
  --color-primary: 159 96% 30%;           /* Emerald-600 */
  --color-primary-foreground: 0 0% 100%; /* White text for contrast on emerald */
  --color-secondary: 240 5% 96%;
  --color-secondary-foreground: 240 6% 10%;
  --color-muted: 240 5% 96%;
  --color-muted-foreground: 240 4% 46%;
  --color-accent: 159 96% 96%;            /* Emerald-50 */
  --color-accent-foreground: 159 96% 30%;
  --color-destructive: 0 84% 60%;
  --color-destructive-foreground: 0 0% 100%;
  --color-card: 0 0% 100%;
  --color-card-foreground: 240 10% 10%;
  --color-popover: 0 0% 100%;
  --color-popover-foreground: 240 10% 10%;
  --color-input: 240 6% 90%;
  --color-ring: 159 96% 30%;              /* Emerald-600 */
  --radius: 0.75rem;                     /* 12px matches rounded-xl */

  /* Fonts */
  --font-sans: 'Inter', 'Geist', ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-mono: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  /* Layout */
  --sidebar-width: 170px;
  --sidebar-width-collapsed: 64px;
  --header-height: 64px;
  
  /* Typography Scale Extension */
  --text-2xs: 0.625rem; /* 10px */
  --text-2xs--line-height: 0.75rem;
}

:root {
  color-scheme: light;
  font-feature-settings: 'cv02', 'cv05', 'cv11';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

@layer utilities {
  .text-2xs {
    font-size: var(--text-2xs);
    line-height: var(--text-2xs--line-height);
  }
  
  .w-sidebar {
    width: var(--sidebar-width);
  }

  .w-navigator-sm {
    min-width: 80px;
  }
  
  .w-navigator-md {
    min-width: 110px;
  }
  
  .w-navigator-lg {
    min-width: 140px;
  }

  .app-background {
    @apply bg-zinc-50 min-h-screen relative overflow-hidden;
    /* Aurora background will be handled by AppLayout components */
  }

  /* .bg-noise definition removed as it's now applied directly */
  
  .glass-card {
    @apply bg-white/70 backdrop-blur-2xl border border-white/60 shadow-xl shadow-emerald-900/5 relative overflow-hidden;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.03),
      0 2px 4px -1px rgba(0, 0, 0, 0.02),
      inset 0 0 0 1px rgba(255, 255, 255, 0.6); /* Inner light ring */
    transition: all 0.2s ease-out;
  }

  .glass-card:hover {
    @apply bg-white/75 border-white/70;
    box-shadow:
      0 6px 8px -1px rgba(0, 0, 0, 0.04),
      0 4px 6px -1px rgba(0, 0, 0, 0.03),
      inset 0 0 0 1px rgba(255, 255, 255, 0.7);
  }
  
  .glass-card::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
    opacity: 0.05;
    pointer-events: none;
  }

  /* Top highlight for 3D feel */
  .glass-card::after {
    content: "";
    position: absolute;
    inset: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
    top: 0;
    pointer-events: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Page transition animations */
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-in-from-bottom {
    from {
      opacity: 0;
      transform: translateY(1rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-in {
    animation-fill-mode: backwards;
  }

  .fade-in {
    animation-name: fade-in;
  }

  .slide-in-from-bottom {
    animation-name: slide-in-from-bottom;
  }

  /* Typography improvements */
  h1, h2, h3, h4, h5, h6 {
    letter-spacing: -0.025em; /* tracking-tight */
  }

  /* Smooth transitions for interactive elements */
  button:not(.no-transition),
  a:not(.no-transition),
  input:not(.no-transition),
  select:not(.no-transition) {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* Handsontable General Overrides (Light Mode / Default) */
.handsontable {
  font-family: inherit;
}

/* Remove default borders and make grid lines subtle */
.handsontable table,
.handsontable tbody,
.handsontable thead,
.handsontable td,
.handsontable th {
  border-color: transparent; /* Remove most borders */
  border-style: none;
}

/* Row/Col headers styling */
.handsontable th {
  background-color: #f8fafc;
  color: #374151;
  font-weight: 700;
  border-bottom: 1px solid #e5e7eb;
  border-right: none;
}

/* First row (Time/Day headers) */
.handsontable tr:first-child th {
  border-top: none;
  padding-top: 4px;
  padding-bottom: 4px;
  font-size: 11px;
  text-transform: none;
  letter-spacing: 0;
  line-height: 1.2;
  height: 28px;
}

/* Time column header */
.handsontable th:first-child {
  border-left: none;
  text-align: right;
  padding-right: 12px;
  color: #6b7280;
  font-weight: 600;
}

/* Cells */
.handsontable td {
  border-right: none !important; /* Remove vertical borders between columns */
  border-bottom: 1px dashed #f4f4f5 !important; /* Very subtle horizontal separator (zinc-100), dashed */
  padding: 2px;
}

.handsontable,
.handsontable .wtHolder,
.handsontable .wtHider,
.handsontable .htCore {
  border: 0;
  box-shadow: none;
  outline: 0;
}

.handsontable th.hiTimeColHeaderDay {
  text-align: center;
}

.handsontable th.hiTimeColHeaderComplete {
  color: #16a34a;
}

/* Hide the blue selection border slightly or make it brand color */
.handsontable .wtBorder {
  background-color: hsl(var(--color-brand-primary)) !important;
}
.handsontable .area {
  background-color: hsla(var(--color-brand-primary), 0.2) !important;
}

/* Current time indicator */
.handsontable .current-time-indicator {
  background-color: hsl(var(--color-brand-primary));
}

/* Modern Design System Utilities */
  @layer utilities {
    /* Gradient Utilities */
    .gradient-primary {
      @apply bg-gradient-to-r from-emerald-400 to-emerald-600;
    }
    .bg-mesh {
      background-image: 
        radial-gradient(at 0% 0%, hsla(var(--color-brand-primary), 0.05) 0px, transparent 50%),
        radial-gradient(at 100% 0%, hsla(var(--color-brand-secondary), 0.05) 0px, transparent 50%),
        radial-gradient(at 100% 100%, hsla(var(--color-brand-primary), 0.03) 0px, transparent 50%),
        radial-gradient(at 0% 100%, hsla(var(--color-brand-secondary), 0.03) 0px, transparent 50%);
      background-attachment: fixed;
    }
    .text-gradient {
      @apply bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 to-emerald-800;
    }
  .gradient-border {
    position: relative;
    background: linear-gradient(var(--color-surface), var(--color-surface)) padding-box,
                linear-gradient(to right, hsl(var(--color-brand-primary)), hsl(var(--color-brand-secondary))) border-box;
    border: 2px solid transparent;
    border-radius: var(--radius);
  }

  /* Enhanced Shadows */
  .shadow-glow {
    box-shadow: 0 0 20px -5px hsla(var(--color-brand-primary), 0.5);
  }
  .shadow-glow-sm {
    box-shadow: 0 0 10px -2px hsla(var(--color-brand-primary), 0.3);
  }
  .shadow-card {
    box-shadow: 0 1px 2px rgba(0,0,0,0.05), 0 4px 6px -1px rgba(0,0,0,0.02), 0 10px 15px -3px rgba(0,0,0,0.03);
  }
  .shadow-card-hover {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025);
  }
  .shadow-elevated {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }

  /* Glass Effects - Removed duplicate .glass-card as it is defined at top */
  .glass-card-strong {
    @apply bg-white/90 backdrop-blur-lg border border-white/30;
  }

  /* Custom Scrollbar */
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full hover:bg-gray-400;
  }

  /* Animation Utilities */
  .stagger-1 { animation-delay: 100ms; }
  .stagger-2 { animation-delay: 200ms; }
  .stagger-3 { animation-delay: 300ms; }
  .stagger-4 { animation-delay: 400ms; }
  .stagger-5 { animation-delay: 500ms; }

  /* Surface Utilities */
  .surface-1 {
    background: var(--surface-1);
  }
  .surface-2 {
    background: var(--surface-2);
  }
  .surface-3 {
    background: var(--surface-3);
  }
  .surface-inset {
    background: var(--surface-inset);
  }

  /* Skeleton Loading Animation */
  .skeleton {
    @apply bg-zinc-200/60 rounded-md;
    background: linear-gradient(
      90deg,
      rgba(244, 244, 245, 0.6) 0%,
      rgba(228, 228, 231, 0.8) 50%,
      rgba(244, 244, 245, 0.6) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  /* Staggered reveal animation */
  .stagger-reveal > * {
    opacity: 0;
    animation: fade-up 0.4s ease-out forwards;
  }
  .stagger-reveal > *:nth-child(1) { animation-delay: 0ms; }
  .stagger-reveal > *:nth-child(2) { animation-delay: 50ms; }
  .stagger-reveal > *:nth-child(3) { animation-delay: 100ms; }
  .stagger-reveal > *:nth-child(4) { animation-delay: 150ms; }
  .stagger-reveal > *:nth-child(5) { animation-delay: 200ms; }
  .stagger-reveal > *:nth-child(6) { animation-delay: 250ms; }
}

/* Keyframes */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes scale-in {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes slide-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fade-up {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 15px -3px hsla(var(--color-brand-primary), 0.3); }
  50% { box-shadow: 0 0 25px -5px hsla(var(--color-brand-primary), 0.6); }
}

@keyframes aurora-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(30px, -50px) scale(1.1); }
  66% { transform: translate(-20px, 20px) scale(0.9); }
}

@keyframes aurora-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(-30px, 40px) scale(1.1); }
  66% { transform: translate(20px, -30px) scale(0.9); }
}

@keyframes aurora-3 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(20px, -20px) scale(1.1); }
  66% { transform: translate(-10px, 20px) scale(0.9); }
}

.animate-aurora-1 {
  animation: aurora-1 15s infinite ease-in-out;
}
.animate-aurora-2 {
  animation: aurora-2 20s infinite ease-in-out;
}
.animate-aurora-3 {
  animation: aurora-3 25s infinite ease-in-out;
}
